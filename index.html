<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name ="viewport" content="width=device-width,initial-scaling=1.0">
        <meta http-equiv="X-UA-Copatible" content="ie=edge">
        <title>Document</title>
    </head>
    <body>

        <button onClick="subscribe()">Subscribe</button>

        <script>

            addEventListener('load',async() => {
                let sw = await navigator.serviceWorker.register('./sw.js')
                console.log(sw)
            })

            async function subscribe(){
                let sw = await navigator.serviceWorker.ready;
                let push = await sw.pushManager.subscribe({
                    userVisibleOnly: true,
                    applicationServerKey: 'BF1TxUyiUNodL6X6oMczLiANRrNYrJo_BFPec3ltyYrGiDjPG4qlTDgxti80_F9nrxLTWGMb-423z1Vchhua0O8'
                })

                console.log(JSON.stringify(push))
            }
        </script>
    </body>
</html>